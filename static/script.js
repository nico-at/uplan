const translations={de:{title:"u:plan",description:"Erstelle ICS-Feeds f\xfcr Deine Lehrveranstaltungen ohne Verletzung der <a href='https://ufind.univie.ac.at/de/help.html#disclaimer' target='_blank'>u:find Nutzungsbedingungen</a>. Diese Feeds k\xf6nnen zu den meisten Kalendern wie iOS Kalender oder Google Kalender hinzugef\xfcgt werden und halten Deinen Zeitplan immer aktuell.",coursesLabel:"Lehrveranstaltungen",coursesPlaceholder:"IDs durch Beistrich getrennt, z.B. 051011,051012-3,051131-5",semesterLabel:"Semester",submitButton:"ICS-Feed erstellen",disclaimer:"<strong>Haftungsausschluss:</strong> Diese Anwendung wird nicht von der Universit\xe4t Wien bereitgestellt. Die Universit\xe4t Wien \xfcbernimmt keine Verantwortung f\xfcr die Datengenauigkeit und haftet nicht f\xfcr etwaige Sch\xe4den, die Nutzern oder Dritten im Zusammenhang mit der Nutzung dieser Daten entstehen.",imprintLink:"Impressum",privacyLink:"Datenschutz",loadingMessage:"Dein ICS-Feed wird generiert, das kann einige Sekunden dauern...",rateLimitMessage:"Zu viele Anfragen. Bitte versuche es sp\xe4ter erneut."},en:{title:"u:plan",description:"Create automatically updating ICS feeds for your courses without violating the <a href='https://ufind.univie.ac.at/en/help.html#disclaimer' target='_blank'>u:find terms</a>. These feeds can be easily added to any calendar app like iOS Calendar or Google Calendar, keeping your schedule always up to date.",coursesLabel:"Course IDs",coursesPlaceholder:"Comma-separated e.g.,  051011,051012-3,051131-5",semesterLabel:"Semester",submitButton:"Create ICS Feed",disclaimer:"<strong>Disclaimer:</strong> This application is not provided by the University of Vienna. The University of Vienna assumes no responsibility for data accuracy and is not liable for any damages incurred by users or third parties in connection with the use of this data.",imprintLink:"Imprint",privacyLink:"Data Privacy",loadingMessage:"Generating your ICS feed, this might take a few seconds...",rateLimitMessage:"Too many requests. Please try again later."}};let currentLanguage="de";function setLanguage(e){currentLanguage=e,document.documentElement.lang=e,document.getElementById("title").textContent=translations[e].title,document.getElementById("description").innerHTML=translations[e].description,document.getElementById("coursesLabel").textContent=translations[e].coursesLabel,document.getElementById("courses").placeholder=translations[e].coursesPlaceholder,document.getElementById("semesterLabel").textContent=translations[e].semesterLabel,document.getElementById("submitButton").textContent=translations[e].submitButton,document.getElementById("disclaimer").innerHTML=translations[e].disclaimer,document.getElementById("languageToggle").textContent="de"===e?"en":"de"}document.getElementById("languageToggle").addEventListener("click",function(){setLanguage("de"===currentLanguage?"en":"de")}),setLanguage("de"),document.getElementById("planForm").addEventListener("submit",function(e){e.preventDefault();let t=document.getElementById("courses").value.replace(/\s+/g,""),n=document.getElementById("semester").value.replace(/\s+/g,""),a=document.getElementById("result"),s=document.querySelector('button[type="submit"]');s.disabled=!0;let r=setTimeout(()=>{a.innerHTML=translations[currentLanguage].loadingMessage,a.className="success"},300);fetch(`/create?courses=${t}&semester=${n}`).then(async e=>{if(e.ok)return e.json();if(429===e.status)throw Error(translations[currentLanguage].rateLimitMessage);{let t=await e.json();throw Error(t.detail||`HTTP ${e.status}`)}}).then(e=>{a.innerHTML=`ICS-Feed URL: <strong>${e.url}</strong></br></br>${e.courses.join("\n")}`,a.className="success"}).catch(e=>{a.textContent=`${e.message}`,a.className="error"}).finally(()=>{clearTimeout(r),s.disabled=!1})});